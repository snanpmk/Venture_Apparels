<!-- addCategory.ejs -->

<div class="container-fluid">
  <div class="row">
    <div class="col-md-2">
      <% include('./partials/adminSidebar') %>
    </div>

    <div class="col-md-10">
      <h4 style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">ADD CATEGORY</h4>
      <div class="container mt-4">
        <form action="/product/add-category" method="post">
          <div class="form-group">
            <label for="categoryName">Category Name</label>
            <input type="text" class="form-control" id="categoryName" name="categoryName" placeholder="Enter category name" required>
          </div>

          <div class="form-group">
            <label for="categoryDescription">Category Description</label>
            <textarea class="form-control" id="categoryDescription" name="categoryDescription" placeholder="Enter category description"></textarea>
          </div>

          <div class="form-group">
            <label for="gender">Gender</label><br>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" id="genderMen" name="gender" value="men" required>
              <label class="form-check-label" for="genderMen">Men's</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" id="genderWomen" name="gender" value="women">
              <label class="form-check-label" for="genderWomen">Women's</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" id="genderUnisex" name="gender" value="unisex">
              <label class="form-check-label" for="genderUnisex">Unisex</label>
            </div>
          </div>

          <div class="form-group">
            <label for="ageGroup">Age Group</label><br>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="checkbox" id="ageAdults" name="ageGroup" value="adults">
              <label class="form-check-label" for="ageAdults">Adults</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="checkbox" id="ageKids" name="ageGroup" value="kids">
              <label class="form-check-label" for="ageKids">Kids</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="checkbox" id="ageInfants" name="ageGroup" value="infants">
              <label class="form-check-label" for="ageInfants">Infants</label>
            </div>
          </div>

          <button type="submit" class="btn btn-primary">Add Category</button>
          <div class="mt-4">
            <p id="errorMessage" class="text-danger mt-2"></p>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelector('form').addEventListener('submit', function(event) {
      event.preventDefault();
      document.getElementById('errorMessage').textContent = '';

      const formData = new FormData(this);

      fetch('/product/add-category', {
        method: 'POST',
        body: formData
      })
        .then(response => {
          if (response.ok) {
            return response.json();
          } else if (response.status === 400) {
            throw new Error('Please select one gender option');
          } else {
            throw new Error('An error occurred');
          }
        })
        .then(data => {
          console.log(data);
          // Handle success response if needed
        })
        .catch(error => {
          document.getElementById('errorMessage').textContent = error.message;
          console.error(error);
        });
    });
  });
</script>
